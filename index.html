<!doctype html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DevSphere - Chatly Engine</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
      :root {
        --bg-light: #f8fafc;
        --panel-bg: rgba(255, 255, 255, 0.85);
        --text-main: #1e293b;
        --accent-blue: #0284c7;
        --border-color: #e2e8f0;
        --header-box: linear-gradient(135deg, #0284c7 0%, #0369a1 100%);
        --mdn-link: #0284c7;
        --card-hover: #e2e8f0;
      }

      body {
        font-family: "Inter", "Segoe UI", system-ui, sans-serif;
        background: radial-gradient(circle at top left, #f1f5f9, #f8fafc);
        color: var(--text-main);
        margin: 0;
        padding: 120px 20px 60px 20px; /* Zwiększony górny padding dla wyszukiwarki */
        display: flex;
        justify-content: center;
        min-height: 100vh;
      }

      /* --- FIXED SEARCH CONTAINER --- */
      .search-container {
        position: fixed;
        top: 0;
        left: 50%;
        transform: translateX(-50%);
        z-index: 1000;
        width: 100%;
        max-width: 850px;
        padding: 20px;
        box-sizing: border-box;
        background: rgba(248, 250, 252, 0.8); /* Lekkie tło pod wyszukiwarką */
        backdrop-filter: blur(12px);
        border-bottom: 1px solid var(--border-color);
      }

      #tag-search {
        width: 95%;
        padding: 14px 20px;
        border-radius: 12px;
        border: 1px solid var(--border-color);
        background: var(--panel-bg);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        font-family: inherit;
        font-size: 1em;
        outline: none;
        transition: border-color 0.3s;
      }

      #tag-search:focus {
        border-color: var(--accent-blue);
      }

      .stats-bar {
        display: flex;
        gap: 12px;
        margin-top: 12px;
        font-size: 0.85em;
        color: var(--text-main);
        font-weight: 500;
        align-items: center;
      }

      /* --- SIDEBAR NAV --- */
      .sidebar-nav {
        position: fixed;
        right: 40px;
        top: 100px;
        width: 220px;
        background: var(--panel-bg);
        backdrop-filter: blur(8px);
        border: 1px solid var(--border-color);
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        display: none;
      }

      @media (min-width: 1400px) {
        .sidebar-nav { display: block; }
      }
.sidebar-nav h5 {
        margin: 0 0 15px 0;
        color: var(--accent-blue);
        text-transform: uppercase;
        font-size: 0.7em;
        letter-spacing: 1.5px;
        font-weight: 800;
        opacity: 0.8;
      }

      #sidebar-nav {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .sidebar-nav a {
        display: block;
        color: var(--text-main);
        text-decoration: none;
        font-size: 0.85em;
        padding: 10px 12px;
        border-radius: 8px;
        transition: all 0.2s ease;
        border-left: 3px solid transparent;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .sidebar-nav a:hover {
        background: var(--accent-glow); /* Wykorzystujemy Twój kolor akcentu z małą przezroczystością */
        color: var(--accent-blue);
        border-left: 3px solid var(--accent-blue);
        padding-left: 16px;
      }

      /* Styl dla aktywnej sekcji (opcjonalnie do dodania przez JS) */
      .sidebar-nav a.active {
        background: var(--header-box);
        color: white;
        font-weight: 600;
      }
      /* --- CONTENT PREVIEW --- */
      #preview {
        max-width: 850px;
        width: 100%;
        line-height: 1.7;
        animation: fadeIn 0.6s ease-out;
      }

      #preview h2 {
        background: var(--header-box);
        border-radius: 12px;
        padding: 20px 25px;
        font-size: 1.2em;
        color: #ffffff;
        text-transform: uppercase;
        letter-spacing: 1.5px;
        margin-top: 40px;
        box-shadow: 0 8px 20px rgba(2, 132, 199, 0.15);
        scroll-margin-top: 140px; /* Żeby nagłówek nie wpadał pod wyszukiwarkę */
      }

      #preview ul {
        display: flex;
        flex-direction: column;
        padding: 0;
        margin: 20px 0;
        list-style: none;
      }

      #preview li {
        background: var(--panel-bg);
        backdrop-filter: blur(8px);
        margin-bottom: 12px;
        padding: 16px 24px;
        border-radius: 12px;
        border: 1px solid var(--border-color);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        display: flex;
        justify-content: space-between;
        align-items: center;
        cursor: pointer;
      }

      #preview li:hover {
        transform: translateX(5px);
        background: var(--card-hover);
        border-color: var(--accent-blue);
      }

      #preview li.not-learned {
        border-left: 6px solid var(--mdn-link);
        background: rgba(225, 29, 72, 0.03);
      }

      .mdn-link {
        color: var(--mdn-link);
        font-weight: 600;
        font-size: 0.9em;
        padding: 4px 8px;
        border-radius: 6px;
        transition: background 0.2s;
      }

      .mdn-link:hover {
        background: rgba(225, 29, 72, 0.1);
      }

      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(15px); }
        to { opacity: 1; transform: translateY(0); }
      }
    </style>
  </head>
  <body>

    <div class="search-container">
      <input type="text" id="tag-search" placeholder="Szukaj tagu lub atrybutu (np. 'video' lub 'href')...">
      <div class="stats-bar">
        <span id="stat-total">Tagi: 0</span>
        <span id="stat-learned" style="color: var(--accent-blue)">Opanowane: 0</span>
        <span id="stat-not-learned" style="color: var(--mdn-link)">Do nauki: 0</span>
        <button id="toggle-filter" style="margin-left: auto; background: white; border: 1px solid var(--accent-blue); color: var(--accent-blue); border-radius: 6px; cursor: pointer; padding: 4px 12px; font-weight: 600; font-size: 0.8em; transition: 0.3s;">Pokaż tylko do nauki</button>
      </div>
    </div>

    <nav class="sidebar-nav" id="sidebar-nav">
      <h5>Nawigacja</h5>
      <div id="nav-container"></div>
    </nav>

    <div id="preview">
      </div>

    <script>
      const rawContent = `
## Struktura dokumentu

### Konfiguracja bazowa:

- <!DOCTYPE> – deklaracja standardu
- <html> – korzeń dokumentu
- <head> – nagłówek dokumentu
- <meta> – metadane strony
- <title> – tytuł strony
- <link> – powiązanie zasobów
- <base> – adres bazowy
- <style> – arkusz stylów
- <body> – treść dokumentu

### Układ strony:

- <header> – nagłówek sekcji
- <nav> – menu nawigacyjne
- <search> – sekcja wyszukiwania
- <main> – treść główna
- <section> – sekcja tematyczna
- <article> – samodzielny wpis
- <hgroup> – grupa nagłówków
- <aside> – treść boczna
- <address> – dane kontaktowe
- <footer> – stopka sekcji
- <div> – blok ogólny

### Bloki treści:

- <h1> – nagłówek pierwszy
- <h2> – nagłówek drugi
- <h3> – nagłówek trzeci
- <h4> – nagłówek czwarty
- <h5> – nagłówek piąty
- <h6> – nagłówek szósty
- <p> – blok tekstu
- <a> – odnośnik zewnętrzny
- <span> – kontener liniowy
- <hr> – linia pozioma
- <br> – przełamanie linii

## Porządkowanie treści

### Listy wyliczeniowe:

- <ul> – lista nieuporządkowana
- <ol> – lista uporządkowana
- <menu> – lista interakcji
- <li> – element listy

### Listy opisowe:

- <dl> – lista opisowa
- <dt> – termin opisu
- <dd> – treść opisu

### Tabele danych:

- <table> – struktura tabeli
- <caption> – tytuł tabeli
- <colgroup> – grupa kolumn
- <col> – definicja kolumny
- <thead> – nagłówek tabeli
- <tbody> – treść tabeli
- <tfoot> – stopka tabeli
- <tr> – wiersz tabeli
- <th> – komórka nagłówkowa
- <td> – komórka danych

## Obsługa mediów

### Strumienie multimedialne:

- <video> – odtwarzacz wideo
- <audio> – odtwarzacz audio
- <source> – źródło mediów
- <track> – ścieżka tekstowa
- <embed> – zasób zewnętrzny
- <object> – obiekt zewnętrzny

### Grafika wizualna:

- <img> – obraz rastrowy
- <picture> – kontener obrazu
- <figure> – ilustracja tematyczna
- <figcaption> – podpis ilustracji
- <svg> – grafika wektorowa
- <canvas> – obszar rysowania
- <map> – mapa odsyłaczy
- <area> – obszar mapy

## Interakcja użytkownika

### Struktura formularza:

- <form> – formularz danych
- <fieldset> – grupa pól
- <legend> – tytuł grupy
- <label> – etykieta pola

### Pola danych:

- <input> – pole wprowadzania
- <textarea> – obszar tekstowy
- <select> – lista wyboru
- <selectedcontent> – wybrana treść
- <optgroup> – grupa opcji
- <option> – opcja wyboru
- <datalist> – lista podpowiedzi
- <output> – wynik działania

### Kontrola treści:

- <button> – przycisk akcji
- <dialog> – okno dialogowe
- <geolocation> – lokalizacja użytkownika
- <details> – szczegóły treści
- <summary> – podsumowanie szczegółów
- <progress> – pasek postępu
- <meter> – pomiar skalarny

## Przetwarzanie danych

### Zapis techniczny:

- <pre> – tekst sformatowany
- <code> – fragment kodu
- <var> – zmienna kodowa
- <kbd> – wejście klawiaturowe
- <samp> – wyjście systemowe
- <math> – zapis matematyczny

### Osadzanie skryptów:

- <script> – skrypt zewnętrzny
- <noscript> – alternatywa skryptu
- <iframe> – ramka witryny
- <fencedframe> – ramka izolowana

### Szablony systemowe:

- <template> – szablon treści
- <slot> – gniazdo szablonu

## Kontekst tekstu

### Cytaty treści:

- <blockquote> – cytat blokowy
- <q> – cytat liniowy
- <cite> – źródło cytatu
- <abbr> – skrót nazwy
- <dfn> – definicja terminu

### Dane informacyjne:

- <time> – format czasu
- <data> – wartość danych

### Adnotacje tekstowe:

- <ruby> – adnotacja fonetyczna
- <rt> – wymowa znaku
- <rp> – nawias adnotacji

## Formatowanie treści

### Stylistyka znaków:

- <b> – pogrubienie tekstu
- <i> – pochylenie tekstu
- <u> – podkreślenie tekstu
- <s> – przekreślenie tekstu

### Wyróżnienia wizualne:

- <strong> – uwypuklenie tekstu
- <em> – wyróżnienie tekstu
- <ins> – wstawienie tekstu
- <del> – usunięcie tekstu
- <mark> – zaznaczenie tekstu
- <small> – pomniejszenie tekstu

### Orientacja linii:

- <sub> – indeks dolny
- <sup> – indeks górny
- <bdo> – kierunek tekstu
- <bdi> – izolacja tekstu
- <wbr> – łamanie linii

## Atrybuty globalne

### Tożsamość wizualna:

- id – unikalny identyfikator
- class – klasa stylów
- style – style liniowe
- data-\* – własne dane
  aria-\* – dostępność elementu
- role – rola elementu
- title – opis pomocniczy

### Kontrola interakcji:

- tabindex – kolejność tabulacji
- accesskey – skrót klawiaturowy
- draggable – przeciąganie elementu
- hidden – ukrycie elementu
- inert – ignorowanie interakcji
- popover – okno wyskakujące
- contenteditable – edycja treści
- spellcheck – sprawdzanie pisowni

### Przetwarzanie języka:

- lang – język elementu
- dir – kierunek tekstu
- translate – zgoda tłumaczenia
- autocapitalize – automatyczne wielkie
- nonce – kod bezpieczeństwa

### Dane strukturalne:

- itemscope – zakres elementu
- itemtype – typ elementu
- itemprop – właściwość elementu
- itemid – identyfikator elementu
- itemref – referencja elementu

## Konfiguracja techniczna

### Definicje zasobów:

- type – typ elementu
- rel – powiązania zasobów
- http-equiv – nagłówki dokumentu
- charset – kodowanie znaków
- content – treść metadanych

### Rozszerzenia kodu:

- is – rozszerzenie elementu
- slot – gniazdo szablonu
- part – część cienia
- exportparts – eksport części
- anchor – powiązanie kotwicy
- csp – zasady bezpieczeństwa
- elementtiming – pomiar elementu

### Parametry specjalne:

- data – źródło danych
- alpha – poziom przezroczystości
- colorspace – przestrzeń kolorów
- default – wartość domyślna

## Układ tabel

### Struktura komórek:

- colspan – scalanie kolumn
- rowspan – scalanie wierszy
- headers – nagłówki komórek
- scope – zakres nagłówka
- span – zasięg kolumn

### Wymiary mapy:

- coords – współrzędne mapy
- shape – kształt obszaru
- ismap – mapa serwera
- usemap – mapa klienta

### Kontrola ramek:

- sandbox – izolacja ramki
- srcdoc – treść dokumentu
- allow – uprawnienia ramki
- target – okno docelowe
- open – element otwarty

## Zarządzanie mediami

### Obsługa plików:

- src – źródło pliku
- srcset – zestawy obrazów
- sizes – rozmiary ikon
- alt – opis alternatywny
- poster – miniatura wideo
- preload – wstępne ładowanie
- crossorigin – dostęp zewnętrzny

### Odtwarzanie treści:

- controls – panel sterowania
- autoplay – start automatyczny
- loop – pętla odtwarzania
- muted – wyciszenie dźwięku
- playsinline – odtwarzanie lokalne
- decoding – metoda dekodowania
- media – warunki mediów
- srclang – język napisów

### Logika połączeń:

- href – adres zasobu
- hreflang – język zasobu
- as – typ ładowania
- async – skrypt asynchroniczny
- defer – skrypt opóźniony
- loading – tryb ładowania
- fetchpriority – priorytet ładowania
- integrity – weryfikacja pliku
- download – wymuszenie pobierania
- ping – śledzenie kliknięć
- referrerpolicy – polityka poleceń

## Obsługa formularzy

### Wysyłka danych:

- action – adres wysyłki
- method – metoda przesyłu
- enctype – kodowanie danych
- name – nazwa pola
- value – wartość domyślna

### Walidacja wpisów:

- required – pole wymagane
- readonly – tylko odczyt
- disabled – pole nieaktywne
- pattern – wzorzec pola
- novalidate – brak walidacji
- formnovalidate – pominięcie walidacji
- maxlength – limit znaków
- minlength – minimum znaków
- max – wartość maksymalna
- min – wartość minimalna
- step – skok wartości

### Wybór opcji:

- placeholder – tekst zastępczy
- autocomplete – autouzupełnianie pól
- autofocus – automatyczne skupienie
- list – lista podpowiedzi
- multiple – wiele wartości
- checked – pole zaznaczone
- selected – element wybrany
- size – rozmiar wizualny

### Metody wejścia:

- capture – źródło mediów
- accept – akceptowane pliki
- accept-charset – kodowanie formularza
- inputmode – tryb klawiatury
- enterkeyhint – przycisk Enter
- autocorrect – automatyczna korekta
- virtualkeyboardpolicy – polityka klawiatury
- writingsuggestions – sugestie pisania

### Relacje pól:

- for – powiązanie etykiety
- form – przypisanie formularza
- formaction – alternatywny adres
- formenctype – alternatywne kodowanie
- formmethod – alternatywna metoda
- formtarget – okno odpowiedzi

## Semantyka tekstu

### Znaczenie treści:

- cite – źródło cytatu
- datetime – znacznik czasu
- label – etykieta elementu
- kind – rodzaj ścieżki
- dirname – kierunek zapisu

### Parametry edycji:

- wrap – zawijanie tekstu
- cols – liczba kolumn
- rows – liczba wierszy
- high – próg wysoki
- low – próg niski
- optimum – wartość optymalna
- start – numer startowy
- reversed – kolejność odwrotna

      `;
const preview = document.getElementById("preview");
      const navContainer = document.getElementById("nav-container");
      const searchInput = document.getElementById('tag-search');
      const toggleFilterBtn = document.getElementById('toggle-filter');
      let showOnlyNotLearned = false;

      function enrichWithMdnLinks(text) {
        // Tagi
        text = text.replace(/<(!?[a-z1-6]+)>(\s*[–-]\s*)?/gi, (match, tag) => {
          const cleanTag = tag.startsWith('!') ? 'Doctype' : tag.toLowerCase();
          const url = `https://developer.mozilla.org/en-US/docs/Web/HTML/Element/${cleanTag}`;
          return `<a href="${url}" target="_blank" class="mdn-link">&lt;${tag}&gt;</a> `;
        });

        // Atrybuty globalne i media (lista z myślnikiem)
        text = text.replace(/^- ([a-z*]+)(\s*[–-]\s*)/gm, (match, attr) => {
          const cleanAttr = attr.replace('*', '').toLowerCase();
          const url = `https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/${cleanAttr}`;
          if (rawContent.includes("Zarządzanie mediami") && !["id", "class", "style", "hidden"].includes(cleanAttr)) {
             // Link do atrybutów specyficznych jeśli nie globalne
             const specUrl = `https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/${cleanAttr}`;
             return `- <a href="${specUrl}" target="_blank" class="mdn-link">${attr}</a> `;
          }
          return `- <a href="${url}" target="_blank" class="mdn-link">${attr}</a> `;
        });

        return text;
      }

      function updateStats() {
        const items = preview.querySelectorAll('li');
        const notLearned = preview.querySelectorAll('li.not-learned').length;
        document.getElementById('stat-total').innerText = `Tagi: ${items.length}`;
        document.getElementById('stat-learned').innerText = `Opanowane: ${items.length - notLearned}`;
        document.getElementById('stat-not-learned').innerText = `Do nauki: ${notLearned}`;
        
        const notLearnedTexts = Array.from(preview.querySelectorAll('li.not-learned')).map(li => li.innerText.trim());
        localStorage.setItem('html_progress', JSON.stringify(notLearnedTexts));
      }

      function filterElements() {
        const query = searchInput.value.toLowerCase();
        const items = preview.querySelectorAll('li');
        
        items.forEach(item => {
          const text = item.innerText.toLowerCase();
          const matchesSearch = text.includes(query);
          const isNotLearned = item.classList.contains('not-learned');
          
          let shouldShow = matchesSearch;
          if (showOnlyNotLearned && !isNotLearned) shouldShow = false;
          item.style.display = shouldShow ? 'flex' : 'none';
        });

        // Ukrywanie pustych nagłówków
        preview.querySelectorAll('h2, h3').forEach(header => {
          let next = header.nextElementSibling;
          let hasVisible = false;
          while(next && next.tagName !== 'H2' && next.tagName !== 'H3') {
            if(next.tagName === 'UL') {
              if(Array.from(next.querySelectorAll('li')).some(li => li.style.display !== 'none')) hasVisible = true;
            }
            next = next.nextElementSibling;
          }
          header.style.display = hasVisible ? 'block' : 'none';
        });
      }

      function init() {
        preview.innerHTML = marked.parse(enrichWithMdnLinks(rawContent));
        
        const items = preview.querySelectorAll("li");
        const saved = JSON.parse(localStorage.getItem('html_progress') || "[]");

        items.forEach(item => {
          item.style.cursor = "pointer";
          if (saved.includes(item.innerText.trim())) item.classList.add("not-learned");

          item.addEventListener("click", (e) => {
            if (e.target.tagName === 'A') return;
            item.classList.toggle("not-learned");
            updateStats();
            if (showOnlyNotLearned) filterElements();
          });
        });

        // Generowanie Nav
        preview.querySelectorAll("h2").forEach((header, i) => {
          header.id = `sec-${i}`;
          const link = document.createElement("a");
          link.href = `#${header.id}`;
          link.innerText = header.innerText;
          navContainer.appendChild(link);
        });

        updateStats();
      }

      searchInput.addEventListener('input', filterElements);
      toggleFilterBtn.addEventListener('click', () => {
        showOnlyNotLearned = !showOnlyNotLearned;
        toggleFilterBtn.innerText = showOnlyNotLearned ? "Pokaż wszystko" : "Pokaż tylko do nauki";
        filterElements();
      });

      init();
    </script>
  </body>
</html>
