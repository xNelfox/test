<!doctype html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DevSphere</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
      :root {
        --bg-light: #f8fafc;
        --panel-bg: rgba(255, 255, 255, 0.8);
        --text-main: #1e293b;
        --accent-blue: #0284c7;
        --accent-glow: rgba(2, 132, 199, 0.1);
        --border-color: #e2e8f0;
        --header-box: linear-gradient(135deg, #0284c7 0%, #0369a1 100%);
        --mdn-link: #e11d48;
        --card-hover: #ffffff;
      }
      a {
        font-family: "Inter", "Segoe UI", system-ui, sans-serif;
        color: var(--text-main);
        text-decoration: none;
      }
      body {
        font-family: "Inter", "Segoe UI", system-ui, sans-serif;
        background: radial-gradient(circle at top left, #f1f5f9, #f8fafc);
        color: var(--text-main);
        margin: 0;
        padding: 60px 20px;
        display: flex;
        justify-content: center;
        min-height: 100vh;
      }
      * {
        scroll-behavior: smooth;
      }
      /* --- NOWA NAWIGACJA PRAWA (BEZ ZMIAN W TWOIM CSS) --- */
      .sidebar-nav {
        position: fixed;
        right: 40px;
        top: 60px;
        width: 240px;
        background: var(--panel-bg);
        backdrop-filter: blur(8px);
        border: 1px solid var(--border-color);
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        display: none; /* Pokaże się gdy JavaScript wykryje nagłówki */
      }

      @media (min-width: 1400px) {
        .sidebar-nav {
          display: block;
        }
      }

      .sidebar-nav h5 {
        margin: 0 0 15px 0;
        color: var(--accent-blue);
        text-transform: uppercase;
        font-size: 0.75em;
        letter-spacing: 1px;
      }

      .sidebar-nav a {
        display: block;
        color: var(--text-main);
        text-decoration: none;
        font-size: 0.85em;
        padding: 8px 0;
        border-bottom: 1px solid var(--border-color);
        transition: 0.2s;
      }

      .sidebar-nav a:hover {
        color: var(--accent-blue);
        padding-left: 5px;
      }
      .sidebar-nav a:last-child {
        border: none;
      }

      /* Twoje oryginalne style */
      #preview {
        max-width: 850px;
        width: 100%;
        line-height: 1.7;
        animation: fadeIn 0.8s ease-out;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      #preview h2 {
        background: var(--header-box);
        border-radius: 12px;
        padding: 18px 25px;
        font-size: 1.1em;
        color: #ffffff;
        text-transform: uppercase;
        letter-spacing: 2px;
        margin-top: 50px;
        box-shadow: 0 10px 15px -3px rgba(2, 132, 199, 0.2);
        border: none;
        scroll-margin-top: 30px; /* Dla płynnego skoku */
      }

      #preview h4 {
        color: var(--accent-blue);
        margin: 35px 0 15px 0;
        font-size: 1.1em;
        font-weight: 700;
        display: flex;
        align-items: center;
        gap: 10px;
      }



      #preview li.not-learned {
  border-left: 5px solid var(--mdn-link);
  background: rgba(225, 29, 72, 0.05);
  box-shadow: 0 4px 12px rgba(225, 29, 72, 0.1);
}

/* Musimy zmienić kontener <ul> w flexbox, by 'order' zadziałał */
#preview ul {
  display: flex;
  flex-direction: column;

          padding: 0;
        margin: 0;
}

      #preview li {
        background: var(--panel-bg);
        backdrop-filter: blur(8px);
        margin-bottom: 12px;
        padding: 16px 24px;
        border-radius: 12px;
        corner-shape: squircle;
        border: 1px solid var(--border-color);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
      }

      #preview li:hover {
        transform: translateY(-3px);
        background: var(--card-hover);
        border-color: var(--accent-blue);
        box-shadow: 0 10px 20px rgba(2, 132, 199, 0.1);
      }

      .mdn-link {
        text-decoration: none;
      }
    </style>
  </head>
  <body>
    <nav class="sidebar-nav">
      <h5>Spis treści</h5>
    <h5>Testowy wygląd, w przyszłości będzie przeniesienie do next.js i wtedy będzie ładniejszy css, narazie skupiam się na zawartości, którą trzymam w mark downie</h5>
      
      <div id="dynamic-nav"></div>
    </nav>

    <div id="preview"></div>

    <script>
      const preview = document.getElementById("preview");
      const navContainer = document.getElementById("dynamic-nav");

      const rawContent = `
## Struktura dokumentu:

#### Konfiguracja dokumentu:

- <!DOCTYPE> – deklaracja standardu
- <html> – korzeń dokumentu
- <head> – nagłówek dokumentu
- <meta> – metadane strony
- <title> – tytuł strony
- <link> – powiązanie zasobów
- <base> – adres bazowy
- <style> – arkusz stylów
- <body> – treść dokumentu

#### Układ strony:

- <header> – nagłówek sekcji
- <hgroup> – grupa nagłówków
- <nav> – menu nawigacyjne
- <main> – treść główna
- <section> – sekcja tematyczna
- <article> – samodzielny wpis
- <aside> – treść boczna
- <search> – sekcja wyszukiwania
- <address> – dane kontaktowe
- <footer> – stopka sekcji
- <div> – blok ogólny

#### Struktura treści:

- <h1> – nagłówek pierwszy
- <h2> – nagłówek drugi
- <h3> – nagłówek trzeci
- <h4> – nagłówek czwarty
- <h5> – nagłówek piąty
- <h6> – nagłówek szósty
- <p> – blok tekstu
- <a> – odnośnik zewnętrzny
- <span> – kontener liniowy
- <hr> – linia pozioma
- <br> – przełamanie linii

## Porządkowanie treści:

#### Listy wyliczeniowe:

- <ul> – lista nieuporządkowana
- <ol> – lista uporządkowana
- <menu> – lista interakcji
- <li> – element listy

#### Listy opisowe:

- <dl> – lista opisowa
- <dt> – termin opisu
- <dd> – treść opisu

#### Tabele danych:

- <table> – struktura tabeli
- <caption> – tytuł tabeli
- <colgroup> – grupa kolumn
- <col> – definicja kolumny
- <thead> – nagłówek tabeli
- <tbody> – treść tabeli
- <tfoot> – stopka tabeli
- <tr> – wiersz tabeli
- <th> – komórka nagłówkowa
- <td> – komórka danych

## Prezentowanie mediów:

#### Obsługa mediów:

- <video> – odtwarzacz wideo
- <audio> – odtwarzacz audio
- <source> – źródło mediów
- <track> – ścieżka tekstowa
- <embed> – zasób zewnętrzny
- <object> – obiekt zewnętrzny

#### Grafika wizualna:

- <img> – obraz rastrowy
- <picture> – kontener obrazu
- <svg> – grafika wektorowa
- <canvas> – obszar rysowania
- <figure> – ilustracja tematyczna
- <figcaption> – podpis ilustracji
- <map> – mapa odsyłaczy
- <area> – obszar mapy

## Interakcja użytkownika:

#### Struktura formularza:

- <form> – formularz danych
- <fieldset> – grupa pól
- <legend> – tytuł grupy
- <label> – etykieta pola

#### Pola formularza:

- <input> – pole wprowadzania
- <textarea> – obszar tekstowy
- <select> – lista wyboru
- <optgroup> – grupa opcji
- <option> – opcja wyboru
- <datalist> – lista podpowiedzi
- <selectedcontent> – wybrana treść

#### Sterowanie treścią:

- <button> – przycisk akcji
- <dialog> – okno dialogowe
- <details> – szczegóły treści
- <summary> – podsumowanie szczegółów
- <progress> – pasek postępu
- <meter> – pomiar skalarny
- <output> – wynik działania

## Przetwarzanie danych:

#### Zapis techniczny:

- <pre> – tekst sformatowany
- <code> – fragment kodu
- <var> – zmienna kodowa
- <kbd> – wejście klawiaturowe
- <samp> – wyjście systemowe
- <math> – zapis matematyczny

#### Osadzanie kodu:

- <script> – skrypt zewnętrzny
- <noscript> – alternatywa skryptu
- <iframe> – ramka witryny
- <fencedframe> – ramka izolowana

#### Szablony treści:

- <template> – szablon treści
- <slot> – gniazdo szablonu

## Objaśnianie tekstu:

#### Cytaty tekstowe:

- <blockquote> – cytat blokowy
- <q> – cytat liniowy
- <cite> – źródło cytatu
- <abbr> – skrót nazwy
- <dfn> – definicja terminu

#### Informacje tekstowe:

- <time> – format czasu
- <data> – wartość danych

#### Adnotacje tekstowe:

- <ruby> – adnotacja fonetyczna
- <rt> – wymowa znaku
- <rp> – nawias adnotacji

## Formatowanie tekstu:

#### Stylistyka tekstu:

- <b> – pogrubienie tekstu
- <i> – pochylenie tekstu
- <u> – podkreślenie tekstu
- <s> – przekreślenie tekstu

#### Wyróżnienia tekstu:

- <strong> – uwypuklenie tekstu
- <em> – wyróżnienie tekstu
- <ins> – wstawienie tekstu
- <del> – usunięcie tekstu
- <mark> – zaznaczenie tekstu
- <small> – pomniejszenie tekstu

#### Orientacja tekstu:

- <sub> – indeks dolny
- <sup> – indeks górny
- <bdo> – kierunek tekstu
- <bdi> – izolacja tekstu
- <wbr> – łamanie linii

- przerwa
- przerwa
- przerwa
- przerwa
- przerwa
- przerwa
- przerwa

#### Atrybuty relacji:

- rel="alternate stylesheet" – alternatywne style
- rel="compression-dictionary" – słownik kompresji
- rel="dns-prefetch" – prefetch DNS
- rel="manifest" – manifest PWA
- rel="me" – weryfikacja autora
- rel="modulepreload" – preload modułów
- rel="noopener" – bezpieczne linki
- rel="noreferrer" – blokada źródeł
- rel="preconnect" – wczesne połączenie
- rel="prefetch" – opcjonalne pobieranie
- rel="preload" – krytyczne pobieranie

#### Metadane strony (name):

- name="application-name" – nazwa aplikacji
- name="author" – autor treści
- name="color-scheme" – schemat kolorów
- name="description" – opis strony
- name="generator" – użyty program
- name="keywords" – słowa kluczowe
- name="referrer" – kontrola źródła
- name="theme-color" – kolor paska
- name="viewport" – skalowanie ekranu
- name="creator" – twórca treści
- name="googlebot" – robot Google
- name="publisher" – wydawca serwisu
- name="robots" – roboty wyszukiwarek

#### Nagłówki dokumentu (http-equiv):

- http-equiv="content-security-policy" – polityka bezpieczeństwa
- http-equiv="content-type" – kodowanie znaków
- http-equiv="default-style" – styl domyślny
- http-equiv="refresh" – odświeżanie strony

#### Zaawansowane skrypty (type):

- type="importmap" – mapowanie modułów
- type="module" – skrypt modułowy
- type="speculationrules" – zasady pre-renderowania

#### Typy pól wejściowych (type):

- type="button" – przycisk ogólny
- type="checkbox" – pole wyboru
- type="color" – wybór koloru
- type="date" – wybór daty
- type="datetime-local" – data i czas
- type="email" – adres e-mail
- type="file" – wybór pliku
- type="hidden" – pole ukryte
- type="image" – przycisk obrazkowy
- type="month" – wybór miesiąca
- type="number" – pole liczbowe
- type="password" – pole hasła
- type="radio" – przycisk opcji
- type="range" – suwak wartości
- type="reset" – czyszczenie pól
- type="search" – pole wyszukiwania
- type="submit" – wysyłka formularza
- type="tel" – numer telefonu
- type="text" – pole tekstowe
- type="time" – wybór godziny
- type="url" – adres strony
- type="week" – wybór tygodnia

#### Atrybuty globalne:

- accesskey – skrót klawiaturowy
- anchor – powiązanie kotwicy
- autocapitalize – automatyczne wielkie litery
- autocorrect – automatyczna korekta
- autofocus – automatyczne skupienie
- class – klasa stylów
- contenteditable – edycja treści
- data-\* – własne dane
- dir – kierunek tekstu
- draggable – przeciąganie elementu
- enterkeyhint – przycisk Enter
- exportparts – eksport części (Shadow DOM)
- hidden – ukrycie elementu
- id – unikalny identyfikator
- inert – ignorowanie interakcji
- inputmode – tryb klawiatury
- is – rozszerzenie elementu
- itemid – identyfikator mikrodata
- itemprop – właściwość mikrodata
- itemref – referencja mikrodata
- itemscope – zakres mikrodata
- itemtype – typ mikrodata
- lang – język elementu
- nonce – kod bezpieczeństwa
- part – część elementu (Shadow DOM)
- popover – okno popover
- slot – gniazdo szablonu
- spellcheck – sprawdzanie pisowni
- style – style liniowe
- tabindex – kolejność tabulacji
- title – opis pomocniczy
- translate – zgoda na tłumaczenie
- virtualkeyboardpolicy – polityka klawiatury
- writingsuggestions – sugestie pisania

      `;

function enrichWithMdnLinks(text) {
  // 1. Obsługa tagów HTML: <tag>
  text = text.replace(/<(!?[a-z1-6]+)>(\s*[–-]\s*)?/gi, (match, tag) => {
    const cleanTag = tag.startsWith('!') ? 'Doctype' : tag.toLowerCase();
    const url = `https://developer.mozilla.org/en-US/docs/Web/HTML/Element/${cleanTag}`;
    return `<a href="${url}" target="_blank" class="mdn-link">&lt;${tag}&gt;</a> `;
  });

  // 2. Obsługa atrybutów rel, name, http-equiv, type: rel="value"
  // Linkuje bezpośrednio do dokumentacji konkretnej wartości atrybutu
  text = text.replace(/(rel|name|http-equiv|type)="([^"]+)"(\s*[–-]\s*)?/gi, (match, attr, value) => {
    let url;
    if (attr === 'rel') url = `https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/rel/${value}`;
    else if (attr === 'name') url = `https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta/name/${value}`;
    else if (attr === 'http-equiv') url = `https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta/http-equiv/${value}`;
    else if (attr === 'type') url = `https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/${value}`;
    
    return `<a href="${url}" target="_blank" class="mdn-link"><strong>${attr}</strong>="${value}"</a> `;
  });

  // 3. Obsługa atrybutów globalnych: słowo na początku linii (po myślniku z markdowna)
  // Wyrażenie szuka tekstu po "- " który nie jest linkiem i kończy się myślnikiem/pauzą
  text = text.replace(/^- ([a-z*]+)(\s*[–-]\s*)/gm, (match, attr) => {
    // Specjalny przypadek dla data-*
    const cleanAttr = attr.replace('*', '');
    const url = `https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/${cleanAttr}`;
    return `- <a href="${url}" target="_blank" class="mdn-link">${attr}</a> `;
  });

  return text;
}     // Merytoryczne renderowanie + generowanie nawigacji
const linkedContent = enrichWithMdnLinks(rawContent);
preview.innerHTML = marked.parse(linkedContent);

// Merytorycznie: Inicjalizacja interakcji po wyrenderowaniu HTML
function initInteractivity() {
  const items = preview.querySelectorAll("li");
  
  items.forEach(item => {
    item.style.cursor = "pointer";
    item.addEventListener("click", (e) => {
      // Merytorycznie: sprawdzamy czy użytkownik nie kliknął w link MDN
      if (e.target.tagName === 'A') return;

      item.classList.toggle("not-learned");
      
      // Merytorycznie: Opcjonalne powiadomienie dźwiękowe lub wizualne można dodać tutaj
    });
  });
}

initInteractivity();

// --- AUTOMATYCZNA NAWIGACJA (pozostaje bez zmian) ---
const headers = preview.querySelectorAll("h2");
headers.forEach((header, index) => {
  const id = `section-${index}`;
  header.id = id;
  const link = document.createElement("a");
  link.href = `#${id}`;
  link.innerText = header.innerText;
  navContainer.appendChild(link);
});
    </script>
  </body>
</html>
