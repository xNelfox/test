<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML Comparator</title>
    <style>
        body { font-family: sans-serif; background: #f4f4f9; padding: 20px; color: #333; }
        .container { display: flex; gap: 20px; margin-bottom: 20px; }
        textarea { flex: 1; height: 300px; padding: 10px; border: 1px solid #ccc; border-radius: 5px; font-family: monospace; }
        button { padding: 10px 20px; background: #2ecc71; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; }
        button:hover { background: #27ae60; }
        .results { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; }
        .result-box { background: white; padding: 15px; border-radius: 5px; border: 1px solid #ddd; }
        h2 { border-bottom: 2px solid #eee; padding-bottom: 10px; }
        ul { list-style: none; padding: 0; }
        li { padding: 3px 0; border-bottom: 1px solid #f9f9f9; font-family: monospace; }
        .tag { color: #e67e22; font-weight: bold; }
        .attr { color: #2980b9; }
        .common { color: #7f8c8d; }
        .only { color: #c0392b; font-weight: bold; }
    </style>
</head>
<body>

    <h1>Porównywarka Znaczników i Atrybutów</h1>
    <p>Wklej dwa różne teksty (listy, tabele, opisy MDN), aby sprawdzić, których elementów brakuje w jednym z nich.</p>

    <div class="container">
        <textarea id="input1" placeholder="Wklej pierwszy tekst tutaj..."></textarea>
        <textarea id="input2" placeholder="Wklej drugi tekst tutaj..."></textarea>
    </div>

    <button onclick="compareTexts()">Porównaj dane</button>

    <div class="results">
        <div class="result-box" id="common-box">
            <h2>Wspólne elementy</h2>
            <ul id="common-list"></ul>
        </div>
        <div class="result-box">
            <h2>Tylko w pierwszym</h2>
            <ul id="only1-list" class="only"></ul>
        </div>
        <div class="result-box">
            <h2>Tylko w drugim</h2>
            <ul id="only2-list" class="only"></ul>
        </div>
    </div>

    <script>
        function extractElements(text) {
            // Szukamy znaczników <tag> oraz atrybutów (słów na początku linii lub po myślniku)
            const tags = text.match(/<[a-zA-Z0-9*-]+>/g) || [];
            
            // Prosta heurystyka dla atrybutów: szukamy słów składających się z małych liter i myślników, 
            // które występują przed "–" lub są w tabeli (min 2 znaki)
            const attributes = text.match(/^[a-z][a-z0-9-]*(?=\s*–)/gm) || [];
            
            // Czyszczenie i łączenie
            const cleanedTags = tags.map(t => t.toLowerCase());
            const cleanedAttrs = attributes.map(a => a.trim().toLowerCase());
            
            return new Set([...cleanedTags, ...cleanedAttrs]);
        }

        function compareTexts() {
            const text1 = document.getElementById('input1').value;
            const text2 = document.getElementById('input2').value;

            const set1 = extractElements(text1);
            const set2 = extractElements(text2);

            const common = [...set1].filter(x => set2.has(x)).sort();
            const only1 = [...set1].filter(x => !set2.has(x)).sort();
            const only2 = [...set2].filter(x => !set1.has(x)).sort();

            displayList('common-list', common, 'common');
            displayList('only1-list', only1, 'only');
            displayList('only2-list', only2, 'only');
        }

        function displayList(elementId, items, className) {
            const list = document.getElementById(elementId);
            list.innerHTML = '';
            items.forEach(item => {
                const li = document.createElement('li');
                li.className = className;
                // Kolorowanie w zależności czy to tag czy atrybut
                if (item.startsWith('<')) {
                    li.innerHTML = `<span class="tag">${item}</span>`;
                } else {
                    li.innerHTML = `<span class="attr">${item}</span>`;
                }
                list.appendChild(li);
            });
        }
    </script>
</body>
</html>
